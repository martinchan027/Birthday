<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>„ÅäË™ïÁîüÊó•„Åä„ÇÅ„Åß„Å®„ÅÜ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      background: #fffafc;
      font-family: "Courier New", monospace;
      overflow: hidden;
    }

    #container {
      position: absolute;
      top: 5%;
      width: 100%;
      text-align: center;
      font-size: 1.2rem;
      white-space: pre-wrap;
      z-index: 20;
      pointer-events: none;
    }

    #clickLayer {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 99;
      background: transparent;
    }

    img {
      pointer-events: none;
    }

    .photo {
      position: absolute;
      width: 220px;
      height: 150px;
      opacity: 0;
      transition: opacity 0.5s ease;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      border: 3px solid #333;
      border-radius: 10px;
    }

    #photo1 { top: 30%; left: 10%; transform: rotate(26deg); z-index: 1; }
    #photo2 { top: 20%; left: 40%; transform: rotate(-16deg); z-index: 2; }
    #photo3 { top: 40%; left: 0%; transform: rotate(5deg); z-index: 3; }
    #photo4 { top: 50%; left: 50%; transform: rotate(20deg); z-index: 4; }

    #drawing {
      top: 50%; left: 0%;
      width: 400px;
      height: auto;
      z-index: 10;
      opacity: 0;
    }

    .animate-in-1 { animation: slideInFromRight 1s forwards; }
    .animate-in-2 { animation: slideInFromLeft 1s forwards; }
    .animate-in-3 { animation: slideInFromBottom 1s forwards; }
    .animate-in-4 { animation: slideInFromTop 1s forwards; }
    .zoom-in { animation: zoomIn 1s forwards; }

    @keyframes slideInFromRight {
      from { opacity: 0; transform: translateX(100%) rotate(26deg); }
      to   { opacity: 1; transform: translateX(0) rotate(26deg); }
    }

    @keyframes slideInFromLeft {
      from { opacity: 0; transform: translateX(-100%) rotate(-30deg); }
      to   { opacity: 1; transform: translateX(0) rotate(-30deg); }
    }

    @keyframes slideInFromBottom {
      from { opacity: 0; transform: translateY(100%) rotate(5deg); }
      to   { opacity: 1; transform: translateY(0) rotate(5deg); }
    }

    @keyframes slideInFromTop {
      from { opacity: 0; transform: translateY(-100%) rotate(20deg); }
      to   { opacity: 1; transform: translateY(0) rotate(20deg); }
    }

    @keyframes zoomIn {
      from { opacity: 0; transform: scale(0.5); }
      to   { opacity: 1; transform: scale(1); }
    }

    canvas#sakuraCanvas {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <canvas id="sakuraCanvas"></canvas>
  <div id="clickLayer"></div>
  <div id="container">„ÅäË™ïÁîüÊó•„Åä„ÇÅ„Åß„Å®„ÅÜüéâ</div>

  <img id="photo1" class="photo" src="photo1.jpg" alt="photo1">
  <img id="photo2" class="photo" src="photo2.jpg" alt="photo2">
  <img id="photo3" class="photo" src="photo3.JPG" alt="photo3">
  <img id="photo4" class="photo" src="photo4.JPG" alt="photo4">
  <img id="drawing" class="photo" src="drawing.JPG" alt="drawing">

  <script>
    const messages = [
      "Á¥†Êïµ„Å™‰∏ÄÂπ¥„Å´„Å™„Çä„Åæ„Åô„Çà„ÅÜ„Å´„ÄÇ\n‰∏ÄÁ∑í„Å´ÈÅé„Åî„Åó„Å¶„ÄÅ„ÇÇ„ÅÜ‰∏ÄÂπ¥Âçä„Å†„Å≠„ÄÇ",
      "„ÅÑ„Çç„Çì„Å™Â†¥ÊâÄ„Å∏Ë°å„Å£„Å¶„ÄÅ\n„Åü„Åè„Åï„Çì„ÅÆÊÄù„ÅÑÂá∫„Åå„Åß„Åç„Åü„Åì„Å®„ÄÅ\nÊú¨ÂΩì„Å´Â¨â„Åó„ÅÑ„ÄÇ",
      "„Åì„Çå„Åã„Çâ„ÇÇ‰∏ÄÁ∑í„Å´\n„ÅÑ„Çç„Çì„Å™ÊôØËâ≤„ÇíË¶ã„Å¶„ÅÑ„Åç„Åü„ÅÑ„Å™„ÄÇ\n„ÅÑ„Å§„ÇÇ„ÅÇ„Çä„Åå„Å®„ÅÜüíñ",
      "„Åì„Çå„Åã„Çâ„ÇÇ„ÄÅ„Çà„Çç„Åó„Åè„Å≠üíñüíñ"
    ];

    const container = document.getElementById("container");
    const photos = [
      document.getElementById("photo1"),
      document.getElementById("photo2"),
      document.getElementById("photo3"),
      document.getElementById("photo4")
    ];
    const drawing = document.getElementById("drawing");

    let step = 0;
    let typing = false;

    const typeMessage = (text) => {
      container.textContent = "";
      let i = 0;
      typing = true;
      const interval = setInterval(() => {
        container.textContent += text.charAt(i++);
        if (i > text.length) {
          clearInterval(interval);
          typing = false;
        }
      }, 50);
    };

    const hideAllPhotos = () => {
      photos.forEach(p => p.style.opacity = "0");
    };

    const showPhotosUpTo = (index) => {
      if (index >= 0 && !photos[0].classList.contains("animate-in-1")) {
        photos[0].classList.add("animate-in-1");
        photos[0].style.opacity = "1";
      }
      if (index >= 1 && !photos[1].classList.contains("animate-in-2")) {
        photos[1].classList.add("animate-in-2");
        photos[1].style.opacity = "1";
      }
      if (index >= 2 && !photos[2].classList.contains("animate-in-3")) {
        photos[2].classList.add("animate-in-3");
        photos[2].style.opacity = "1";
      }
      if (index >= 3 && !photos[3].classList.contains("animate-in-4")) {
        photos[3].classList.add("animate-in-4");
        photos[3].style.opacity = "1";
      }
    };

    const next = () => {
      if (typing) return;

      switch (step) {
        case 0:
          showPhotosUpTo(0);
          break;
        case 1:
          hideAllPhotos();
          typeMessage(messages[0]);
          break;
        case 2:
          container.textContent = "";
          showPhotosUpTo(1);
          break;
        case 3:
          hideAllPhotos();
          typeMessage(messages[1]);
          break;
        case 4:
          container.textContent = "";
          showPhotosUpTo(2);
          break;
        case 5:
          hideAllPhotos();
          typeMessage(messages[2]);
          break;
        case 6:
          container.textContent = "";
          showPhotosUpTo(3);
          break;
        case 7:
          typeMessage(messages[3]); // ‰∏çÈö±Ëóè
          break;
        case 8:
          showPhotosUpTo(3);
          drawing.classList.add("zoom-in");
          break;
        default:
          break;
      }
      step++;
    };

    document.getElementById("clickLayer").addEventListener("click", next);

    // üå∏ Á∞°ÂñÆÊ´ªËä±Á≤íÂ≠êÂãïÁï´
    const canvas = document.getElementById("sakuraCanvas");
    const ctx = canvas.getContext("2d");
    let w = canvas.width = window.innerWidth;
    let h = canvas.height = window.innerHeight;

    window.addEventListener("resize", () => {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    });

    const petals = [];
    for (let i = 0; i < 50; i++) {
      petals.push({
        x: Math.random() * w,
        y: Math.random() * h,
        r: Math.random() * 5 + 2,
        d: Math.random() * 1 + 0.5,
        tilt: Math.random() * 10 - 10
      });
    }

    function draw() {
      ctx.clearRect(0, 0, w, h);
      ctx.fillStyle = "rgba(255, 182, 193, 0.8)";
      ctx.beginPath();
      for (let i = 0; i < petals.length; i++) {
        const p = petals[i];
        ctx.moveTo(p.x, p.y);
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
      }
      ctx.fill();
      update();
    }

    function update() {
      for (let i = 0; i < petals.length; i++) {
        const p = petals[i];
        p.y += p.d;
        p.x += Math.sin(p.tilt) * 1.5;
        p.tilt += 0.05;
        if (p.y > h) {
          p.y = 0;
          p.x = Math.random() * w;
        }
      }
    }

    function loop() {
      draw();
      requestAnimationFrame(loop);
    }
    loop();
  </script>
</body>
</html>
